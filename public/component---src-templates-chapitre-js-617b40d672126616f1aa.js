webpackJsonp([0x923310cdd759],{65:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(2),l=o(s),u=n(3),c=(o(u),n(4)),p=n(7),f=o(p),d=function(t){function e(n){a(this,e);var o=r(this,t.call(this,n));return o.onEntering=o.onEntering.bind(o),o.onEntered=o.onEntered.bind(o),o.onExiting=o.onExiting.bind(o),o.onExited=o.onExited.bind(o),o.checkUpLikes=o.checkUpLikes.bind(o),o.toggleLike=o.toggleLike.bind(o),o.login=o.login.bind(o),o.state={user:null,lecteur:null,nomRoman:"",items:[],nombreLike:0,likeStatus:!1,likeText:"J'aime",btn_class_like:"success",likeAutorise:!0,loaded:!1},o.handleSubmitLike=o.handleSubmitLike.bind(o),o}return i(e,t),e.prototype.onEntering=function(){},e.prototype.onEntered=function(){},e.prototype.onExiting=function(){},e.prototype.onExited=function(){},e.prototype.toggleLike=function(){var t=this;this.state.lecteur&&this.state.loaded&&(this.state.likeStatus?(this.setState({likeStatus:!1}),this.setState({likeText:"J'aime"}),this.setState({nombreLike:this.state.nombreLike-1}),this.setState({btn_class_like:"success"}),this.state.items.map(function(e){e.user==t.state.lecteur.email&&e.chapitre==t.props.contentChapitre.titreChapitre&&t.removeItem(e.id)})):(this.setState({likeStatus:!0}),this.setState({likeText:"Je n'aime plus"}),this.setState({nombreLike:this.state.nombreLike+1}),this.setState({btn_class_like:"danger"})))},e.prototype.componentWillMount=function(){this.state.lecteur=f.default.load("lecteur")},e.prototype.componentDidMount=function(){},e.prototype.checkUpLikes=function(){var t=this;this.setState({nombreLike:0}),this.state.lecteur&&this.state.items.map(function(e){e.chapitre==t.props.contentChapitre.titreChapitre&&(e.user==t.state.lecteur.email&&(t.setState({likeStatus:!0}),t.setState({likeText:"Je n'aime plus"}),t.setState({btn_class_like:"danger"})),t.setState({nombreLike:t.state.nombreLike+1}))})},e.prototype.handleSubmitLike=function(t){},e.prototype.login=function(){var t=this;auth.signInWithPopup(provider).then(function(e){var n=e.user;t.setState({user:n}),f.default.save("lecteur",t.state.user,{path:"/"}),window.location.reload()})},e.prototype.removeItem=function(t){if("Je n'aime plus"==this.state.likeText){var e=firebase.database().ref("/likes/"+t);e.remove()}},e.prototype.render=function(){return l.default.createElement("form",{onSubmit:this.handleSubmitLike,className:"float-left d-content"},l.default.createElement(c.Button,{color:this.state.btn_class_like},this.state.nombreLike+" | "+this.state.likeText),l.default.createElement(c.Collapse,{isOpen:this.state.likeStatus,onEntering:this.onEntering,onEntered:this.onEntered,onExiting:this.onExiting,onExited:this.onExited,className:"float-left"}))},e}(l.default.Component);e.default=d,t.exports=e.default},66:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(2),l=o(s),u=n(3),c=(o(u),n(4)),p=n(7),f=o(p),d=function(t){function e(n){a(this,e);var o=r(this,t.call(this,n));return o.checkUpLikes=o.checkUpLikes.bind(o),o.login=o.login.bind(o),o.state={user:null,lecteur:null,nomRoman:"",items:[],nombreLike:0,btn_class_like:"success",likeAutorise:!1,loaded:!1},o}return i(e,t),e.prototype.componentWillMount=function(){this.state.lecteur=f.default.load("lecteur")},e.prototype.componentDidMount=function(){},e.prototype.checkUpLikes=function(){var t=this;this.setState({nombreLike:0}),this.state.lecteur&&this.state.items.map(function(e){e.chapitre==t.props.contentChapitre.titreChapitre&&(e.user==t.state.lecteur.email&&(t.setState({likeStatus:!0}),t.setState({likeText:"Unlike"}),t.setState({btn_class_like:"danger"})),t.setState({nombreLike:t.state.nombreLike+1}))})},e.prototype.login=function(){var t=this;auth.signInWithPopup(provider).then(function(e){var n=e.user;t.setState({user:n}),f.default.save("lecteur",t.state.user,{path:"/"}),window.location.reload()})},e.prototype.render=function(){return l.default.createElement(c.Button,{color:this.state.btn_class_like,onClick:this.login},this.state.nombreLike+" | Connectez-vous pour donner un like")},e}(l.default.Component);e.default=d,t.exports=e.default},67:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(2),l=o(s),u=n(3),c=(o(u),n(4)),p=n(7),f=o(p),d=function(t){function e(n){a(this,e);var o=r(this,t.call(this,n));return o.onEntering=o.onEntering.bind(o),o.onEntered=o.onEntered.bind(o),o.onExiting=o.onExiting.bind(o),o.onExited=o.onExited.bind(o),o.checkUpReads=o.checkUpReads.bind(o),o.toggleRead=o.toggleRead.bind(o),o.login=o.login.bind(o),o.state={user:null,lecteur:null,nomRoman:"",items:[],itemsLu:[],readStatus:!1,readText:"Lu",btn_class_read:"success",likeAutorise:!0,loaded:!1},o.handleSubmitRead=o.handleSubmitRead.bind(o),o}return i(e,t),e.prototype.onEntering=function(){},e.prototype.onEntered=function(){},e.prototype.onExiting=function(){},e.prototype.onExited=function(){},e.prototype.toggleRead=function(){var t=this;this.state.lecteur&&this.state.loaded&&(this.state.readStatus?(this.setState({readStatus:!1}),this.setState({readText:"Lu"}),this.setState({btn_class_read:"success"}),this.state.itemsLu.map(function(e){e.user==t.state.lecteur.email&&e.chapitre==t.props.contentChapitre.titreChapitre&&t.removeItem(e.id)})):(this.setState({readStatus:!0}),this.setState({readText:"Non lu"}),this.setState({btn_class_read:"danger"})))},e.prototype.componentWillMount=function(){this.state.lecteur=f.default.load("lecteur")},e.prototype.componentDidMount=function(){},e.prototype.checkUpReads=function(){var t=this;this.state.lecteur&&this.state.itemsLu.map(function(e){e.chapitre==t.props.contentChapitre.titreChapitre&&e.user==t.state.lecteur.email&&(t.setState({readStatus:!0}),t.setState({readText:"Non lu"}),t.setState({btn_class_read:"danger"}))})},e.prototype.handleSubmitRead=function(t){},e.prototype.login=function(){var t=this;auth.signInWithPopup(provider).then(function(e){var n=e.user;t.setState({user:n}),f.default.save("lecteur",t.state.user,{path:"/"}),window.location.reload()})},e.prototype.removeItem=function(t){},e.prototype.render=function(){return l.default.createElement("form",{onSubmit:this.handleSubmitRead,className:"float-left d-content"},l.default.createElement(c.Button,{color:this.state.btn_class_read},this.state.readText),l.default.createElement(c.Collapse,{isOpen:this.state.readStatus,onEntering:this.onEntering,onEntered:this.onEntered,onExiting:this.onExiting,onExited:this.onExited,className:"float-left"}))},e}(l.default.Component);e.default=d,t.exports=e.default},71:function(t,e){"use strict"},166:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0,e.pageQuery=void 0;var s=n(2),l=o(s),u=n(5),c=o(u),p=n(3),f=o(p);n(6);var d=n(4),h=n(14),m=(o(h),n(9)),b=o(m),E=n(8),y=o(E),g=n(65),k=(o(g),n(67)),_=(o(k),n(66)),S=(o(_),n(71)),v=n(7),x=o(v),w=function(t){function e(n){a(this,e);var o=r(this,t.call(this,n));return o.login=o.login.bind(o),o.state={user:null,lecteur:null},o}return i(e,t),e.prototype.componentWillMount=function(){this.state.lecteur=x.default.load("lecteur")},e.prototype.login=function(){var t=this;S.auth.signInWithPopup(S.provider).then(function(e){var n=e.user;t.setState({user:n}),x.default.save("lecteur",t.state.user,{path:"/"}),window.location.reload()})},e.prototype.render=function(){var t=this.props.data;return l.default.createElement("div",{id:"page-wrapper"},l.default.createElement(b.default,null),l.default.createElement("div",null,l.default.createElement(d.Breadcrumb,{className:"mb-0"},l.default.createElement(d.BreadcrumbItem,null,l.default.createElement(f.default,{to:"/"},"Accueil")),l.default.createElement(d.BreadcrumbItem,null,l.default.createElement(f.default,{to:"/histoires"},"Nos Histoires de l'Univers...")),l.default.createElement(d.BreadcrumbItem,null,l.default.createElement(f.default,{to:"/histoires/"+t.contentfulChapitre.nomRoman},"Roman")),l.default.createElement(d.BreadcrumbItem,{active:!0},t.contentfulChapitre.titreChapitre))),l.default.createElement("div",{className:"equiv"},l.default.createElement(f.default,{className:"text-white",to:"/en"+t.contentfulChapitre.equivalentUrl},l.default.createElement(d.Button,{className:"float-right",color:"primary"},"En"))),l.default.createElement("div",null,l.default.createElement(d.Container,null,l.default.createElement(d.Row,null,l.default.createElement(d.Col,{lg:{size:10,offset:1},md:"12"},l.default.createElement("h1",{className:"page-header display-4 text-center my-5"},t.contentfulChapitre.titreChapitre),l.default.createElement("div",{className:"text-justify lecture-texte",dangerouslySetInnerHTML:{__html:t.contentfulChapitre.texte.childMarkdownRemark.html}}))))),l.default.createElement("div",{className:"py-5"},l.default.createElement(d.Container,null,l.default.createElement(d.Row,null,l.default.createElement(d.Col,{lg:{size:10,offset:1},md:"12"},l.default.createElement(d.Row,null,l.default.createElement(d.Col,{xs:"4",className:"text-left pl-0"},t.contentfulChapitre.chapitreAvant?l.default.createElement(f.default,{className:"btn btn-primary",to:t.contentfulChapitre.chapitreAvant},"Chapitre précédent"):""),l.default.createElement(d.Col,{xs:"4",className:"text-center"},l.default.createElement(f.default,{className:"btn btn-primary",to:"/histoires/"+t.contentfulChapitre.nomRoman},"Retourner au roman")),l.default.createElement(d.Col,{xs:"4",className:"text-right pr-0"},t.contentfulChapitre.chapitreApres?l.default.createElement(f.default,{className:"btn btn-primary",to:t.contentfulChapitre.chapitreApres},"Chapitre suivant"):"")))))),l.default.createElement(y.default,null))},e}(s.Component);w.propTypes={data:c.default.object.isRequired},e.default=w;e.pageQuery="** extracted graphql fragment **"}});
//# sourceMappingURL=component---src-templates-chapitre-js-617b40d672126616f1aa.js.map