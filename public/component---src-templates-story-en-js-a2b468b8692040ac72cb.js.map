{"version":3,"sources":["webpack:///component---src-templates-story-en-js-a2b468b8692040ac72cb.js","webpack:///./src/components/enBtn_like.js","webpack:///./src/components/enBtn_like_disconnect.js","webpack:///./src/components/enBtn_read.js","webpack:///./src/templates/story.en.js"],"names":["webpackJsonp","69","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_react","_react2","_gatsbyLink","_reactstrap","_firebase","_firebase2","_reactCookies","_reactCookies2","EnBtn_like","_React$Component","props","this","_this","onEntering","bind","onEntered","onExiting","onExited","checkUpLikes","toggleLike","login","state","user","lecteur","nomRoman","items","nombreLike","likeStatus","likeText","btn_class_like","likeAutorise","loaded","handleSubmitLike","_this2","setState","map","item","email","chapitre","contentChapitre","titreChapitre","removeItem","id","componentWillMount","load","componentDidMount","_this3","itemsRef","database","ref","on","snapshot","val","newState","push","_this4","e","_this5","preventDefault","_this6","auth","signInWithPopup","provider","then","result","save","path","window","location","reload","itemId","itemRef","remove","render","createElement","onSubmit","className","Button","color","Collapse","isOpen","Component","70","EnBtn_like_disconnect","onClick","71","EnBtn_read","checkUpReads","toggleRead","itemsLu","readStatus","readText","btn_class_read","handleSubmitRead","itemsRefLu","chapitreSlug","slug","itemLu","chapitreApres","codeChapitre","206","pageQuery","undefined","_propTypes","_propTypes2","_gatsbyLink2","_enHeader","_enHeader2","_enFooter","_enFooter2","_enBtn_like","_enBtn_like2","_enBtn_read","_enBtn_read2","_enBtn_like_disconnect","Story","_Component","data","Breadcrumb","BreadcrumbItem","to","active","contentfulRoman","titreRoman","equivalentUrl","Container","Row","Col","lg","imageCouverture","src","file","url","dangerouslySetInnerHTML","__html","resume","childMarkdownRemark","html","Progress","animated","chapitreActuel","maximumChapitre","ListGroup","allContentfulChapitre","edges","edge","ListGroupItem","key","node","Fragment","propTypes","object","isRequired"],"mappings":"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","file":"component---src-templates-story-en-js-a2b468b8692040ac72cb.js","sourcesContent":["webpackJsonp([14152125467628],{\n\n/***/ 69:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _react = __webpack_require__(2);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _gatsbyLink = __webpack_require__(3);\n\t\n\tvar _gatsbyLink2 = _interopRequireDefault(_gatsbyLink);\n\t\n\tvar _reactstrap = __webpack_require__(4);\n\t\n\tvar _firebase = __webpack_require__(7);\n\t\n\tvar _firebase2 = _interopRequireDefault(_firebase);\n\t\n\tvar _reactCookies = __webpack_require__(8);\n\t\n\tvar _reactCookies2 = _interopRequireDefault(_reactCookies);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar EnBtn_like = function (_React$Component) {\n\t    _inherits(EnBtn_like, _React$Component);\n\t\n\t    function EnBtn_like(props) {\n\t        _classCallCheck(this, EnBtn_like);\n\t\n\t        var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\t\n\t        _this.onEntering = _this.onEntering.bind(_this);\n\t        _this.onEntered = _this.onEntered.bind(_this);\n\t        _this.onExiting = _this.onExiting.bind(_this);\n\t        _this.onExited = _this.onExited.bind(_this);\n\t        _this.checkUpLikes = _this.checkUpLikes.bind(_this);\n\t\n\t        _this.toggleLike = _this.toggleLike.bind(_this);\n\t\n\t        _this.login = _this.login.bind(_this);\n\t\n\t        _this.state = {\n\t            user: null,\n\t            lecteur: null,\n\t            nomRoman: \"\",\n\t            items: [],\n\t            nombreLike: 0,\n\t            likeStatus: false,\n\t            likeText: \"Like\",\n\t            btn_class_like: \"success\",\n\t            likeAutorise: true,\n\t            loaded: false\n\t        };\n\t        _this.handleSubmitLike = _this.handleSubmitLike.bind(_this);\n\t        return _this;\n\t    }\n\t\n\t    EnBtn_like.prototype.onEntering = function onEntering() {};\n\t\n\t    EnBtn_like.prototype.onEntered = function onEntered() {};\n\t\n\t    EnBtn_like.prototype.onExiting = function onExiting() {};\n\t\n\t    EnBtn_like.prototype.onExited = function onExited() {};\n\t\n\t    EnBtn_like.prototype.toggleLike = function toggleLike() {\n\t        var _this2 = this;\n\t\n\t        if (this.state.lecteur && this.state.loaded) {\n\t            if (!this.state.likeStatus) {\n\t                this.setState({ likeStatus: true });\n\t                this.setState({ likeText: \"Unlike\" });\n\t                this.setState({ nombreLike: this.state.nombreLike + 1 });\n\t                this.setState({ btn_class_like: \"danger\" });\n\t            } else {\n\t                this.setState({ likeStatus: false });\n\t                this.setState({ likeText: \"Like\" });\n\t                this.setState({ nombreLike: this.state.nombreLike - 1 });\n\t                this.setState({ btn_class_like: \"success\" });\n\t\n\t                this.state.items.map(function (item) {\n\t                    if (item.user == _this2.state.lecteur.email && item.chapitre == _this2.props.contentChapitre.titreChapitre) {\n\t                        _this2.removeItem(item.id);\n\t                    };\n\t                });\n\t            }\n\t        }\n\t    };\n\t\n\t    EnBtn_like.prototype.componentWillMount = function componentWillMount() {\n\t        this.state.lecteur = _reactCookies2.default.load('lecteur');\n\t    };\n\t\n\t    EnBtn_like.prototype.componentDidMount = function componentDidMount() {\n\t        var _this3 = this;\n\t\n\t        var itemsRef = _firebase2.default.database().ref('likes');\n\t        itemsRef.on('value', function (snapshot) {\n\t            var items = snapshot.val();\n\t            var newState = [];\n\t            for (var item in items) {\n\t                newState.push({\n\t                    id: item,\n\t                    chapitre: items[item].chapitre,\n\t                    user: items[item].user\n\t                });\n\t            }\n\t            _this3.setState({\n\t                items: newState\n\t            });\n\t\n\t            if (!_this3.state.loaded) {\n\t                _this3.checkUpLikes();\n\t                _this3.setState({ loaded: true });\n\t            }\n\t        });\n\t    };\n\t\n\t    EnBtn_like.prototype.checkUpLikes = function checkUpLikes() {\n\t        var _this4 = this;\n\t\n\t        this.setState({ nombreLike: 0 });\n\t        if (this.state.lecteur) {\n\t            this.state.items.map(function (item) {\n\t                if (item.chapitre == _this4.props.contentChapitre.titreChapitre) {\n\t                    if (item.user == _this4.state.lecteur.email) {\n\t                        _this4.setState({ likeStatus: true });\n\t                        _this4.setState({ likeText: \"Unlike\" });\n\t                        _this4.setState({ btn_class_like: \"danger\" });\n\t                    };\n\t\n\t                    _this4.setState({ nombreLike: _this4.state.nombreLike + 1 });\n\t                };\n\t            });\n\t        }\n\t    };\n\t\n\t    EnBtn_like.prototype.handleSubmitLike = function handleSubmitLike(e) {\n\t        var _this5 = this;\n\t\n\t        // Empêche le refresh\n\t        e.preventDefault();\n\t\n\t        // Met la référence vers la database\n\t        var itemsRef = _firebase2.default.database().ref('likes');\n\t\n\t        if (!this.state.likeStatus && this.state.loaded) {\n\t            this.state.items.map(function (item) {\n\t                if (item.chapitre == _this5.props.contentChapitre.titreChapitre && item.user == _this5.state.lecteur.email) {\n\t                    _this5.setState({ likeAutorise: false });\n\t                };\n\t            });\n\t\n\t            if (this.state.likeAutorise) {\n\t                // Popule les champs dans une collection \"item\"\n\t                var item = {\n\t                    user: this.state.lecteur.email,\n\t                    chapitre: this.props.contentChapitre.titreChapitre,\n\t                    nomRoman: this.props.contentChapitre.nomRoman\n\t\n\t                    // Pousse l'item créé dans la collection\n\t                };itemsRef.push(item);\n\t            }\n\t        }\n\t\n\t        this.toggleLike();\n\t    };\n\t\n\t    EnBtn_like.prototype.login = function login() {\n\t        var _this6 = this;\n\t\n\t        _firebase.auth.signInWithPopup(_firebase.provider).then(function (result) {\n\t            var user = result.user;\n\t            _this6.setState({\n\t                user: user\n\t            });\n\t            _reactCookies2.default.save('lecteur', _this6.state.user, { path: '/' });\n\t\n\t            window.location.reload();\n\t        });\n\t    };\n\t\n\t    EnBtn_like.prototype.removeItem = function removeItem(itemId) {\n\t        if (this.state.likeText == \"Unlike\") {\n\t            var itemRef = _firebase2.default.database().ref('/likes/' + itemId);\n\t            itemRef.remove();\n\t        }\n\t    };\n\t\n\t    EnBtn_like.prototype.render = function render() {\n\t        return _react2.default.createElement(\n\t            'form',\n\t            { onSubmit: this.handleSubmitLike, className: 'float-left d-content' },\n\t            _react2.default.createElement(\n\t                _reactstrap.Button,\n\t                { color: this.state.btn_class_like },\n\t                this.state.nombreLike + \" | \" + this.state.likeText\n\t            ),\n\t            _react2.default.createElement(_reactstrap.Collapse, {\n\t                isOpen: this.state.likeStatus,\n\t                onEntering: this.onEntering,\n\t                onEntered: this.onEntered,\n\t                onExiting: this.onExiting,\n\t                onExited: this.onExited,\n\t\n\t                className: 'float-left'\n\t            })\n\t        );\n\t    };\n\t\n\t    return EnBtn_like;\n\t}(_react2.default.Component);\n\t\n\texports.default = EnBtn_like;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ 70:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _react = __webpack_require__(2);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _gatsbyLink = __webpack_require__(3);\n\t\n\tvar _gatsbyLink2 = _interopRequireDefault(_gatsbyLink);\n\t\n\tvar _reactstrap = __webpack_require__(4);\n\t\n\tvar _firebase = __webpack_require__(7);\n\t\n\tvar _firebase2 = _interopRequireDefault(_firebase);\n\t\n\tvar _reactCookies = __webpack_require__(8);\n\t\n\tvar _reactCookies2 = _interopRequireDefault(_reactCookies);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar EnBtn_like_disconnect = function (_React$Component) {\n\t    _inherits(EnBtn_like_disconnect, _React$Component);\n\t\n\t    function EnBtn_like_disconnect(props) {\n\t        _classCallCheck(this, EnBtn_like_disconnect);\n\t\n\t        var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\t\n\t        _this.checkUpLikes = _this.checkUpLikes.bind(_this);\n\t        _this.login = _this.login.bind(_this);\n\t\n\t        _this.state = {\n\t            user: null,\n\t            lecteur: null,\n\t            nomRoman: \"\",\n\t            items: [],\n\t            nombreLike: 0,\n\t            btn_class_like: \"success\",\n\t            likeAutorise: false,\n\t            loaded: false\n\t        };\n\t        return _this;\n\t    }\n\t\n\t    EnBtn_like_disconnect.prototype.componentWillMount = function componentWillMount() {\n\t        this.state.lecteur = _reactCookies2.default.load('lecteur');\n\t    };\n\t\n\t    EnBtn_like_disconnect.prototype.componentDidMount = function componentDidMount() {\n\t        var _this2 = this;\n\t\n\t        var itemsRef = _firebase2.default.database().ref('likes');\n\t        itemsRef.on('value', function (snapshot) {\n\t            var items = snapshot.val();\n\t            var newState = [];\n\t            for (var item in items) {\n\t                newState.push({\n\t                    id: item,\n\t                    chapitre: items[item].chapitre,\n\t                    user: items[item].user\n\t                });\n\t            }\n\t            _this2.setState({\n\t                items: newState\n\t            });\n\t\n\t            if (!_this2.state.loaded) {\n\t                _this2.checkUpLikes();\n\t                _this2.setState({ loaded: true });\n\t            }\n\t        });\n\t    };\n\t\n\t    EnBtn_like_disconnect.prototype.checkUpLikes = function checkUpLikes() {\n\t        var _this3 = this;\n\t\n\t        this.setState({ nombreLike: 0 });\n\t        if (this.state.lecteur) {\n\t            this.state.items.map(function (item) {\n\t                if (item.chapitre == _this3.props.contentChapitre.titreChapitre) {\n\t                    if (item.user == _this3.state.lecteur.email) {\n\t                        _this3.setState({ likeStatus: true });\n\t                        _this3.setState({ likeText: \"Je n'aime plus\" });\n\t                        _this3.setState({ btn_class_like: \"danger\" });\n\t                    };\n\t\n\t                    _this3.setState({ nombreLike: _this3.state.nombreLike + 1 });\n\t                };\n\t            });\n\t        }\n\t    };\n\t\n\t    EnBtn_like_disconnect.prototype.login = function login() {\n\t        var _this4 = this;\n\t\n\t        _firebase.auth.signInWithPopup(_firebase.provider).then(function (result) {\n\t            var user = result.user;\n\t            _this4.setState({\n\t                user: user\n\t            });\n\t            _reactCookies2.default.save('lecteur', _this4.state.user, { path: '/' });\n\t\n\t            window.location.reload();\n\t        });\n\t    };\n\t\n\t    EnBtn_like_disconnect.prototype.render = function render() {\n\t        return _react2.default.createElement(\n\t            _reactstrap.Button,\n\t            { color: this.state.btn_class_like, onClick: this.login },\n\t            this.state.nombreLike + \" | Login to give a like\"\n\t        );\n\t    };\n\t\n\t    return EnBtn_like_disconnect;\n\t}(_react2.default.Component);\n\t\n\texports.default = EnBtn_like_disconnect;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ 71:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _react = __webpack_require__(2);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _gatsbyLink = __webpack_require__(3);\n\t\n\tvar _gatsbyLink2 = _interopRequireDefault(_gatsbyLink);\n\t\n\tvar _reactstrap = __webpack_require__(4);\n\t\n\tvar _firebase = __webpack_require__(7);\n\t\n\tvar _firebase2 = _interopRequireDefault(_firebase);\n\t\n\tvar _reactCookies = __webpack_require__(8);\n\t\n\tvar _reactCookies2 = _interopRequireDefault(_reactCookies);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar EnBtn_read = function (_React$Component) {\n\t    _inherits(EnBtn_read, _React$Component);\n\t\n\t    function EnBtn_read(props) {\n\t        _classCallCheck(this, EnBtn_read);\n\t\n\t        var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\t\n\t        _this.onEntering = _this.onEntering.bind(_this);\n\t        _this.onEntered = _this.onEntered.bind(_this);\n\t        _this.onExiting = _this.onExiting.bind(_this);\n\t        _this.onExited = _this.onExited.bind(_this);\n\t        _this.checkUpReads = _this.checkUpReads.bind(_this);\n\t\n\t        _this.toggleRead = _this.toggleRead.bind(_this);\n\t\n\t        _this.login = _this.login.bind(_this);\n\t\n\t        _this.state = {\n\t            user: null,\n\t            lecteur: null,\n\t            nomRoman: \"\",\n\t            items: [],\n\t            itemsLu: [],\n\t            readStatus: false,\n\t            readText: \"Mark read\",\n\t            btn_class_read: \"success\",\n\t            likeAutorise: true,\n\t            loaded: false\n\t        };\n\t        _this.handleSubmitRead = _this.handleSubmitRead.bind(_this);\n\t        return _this;\n\t    }\n\t\n\t    EnBtn_read.prototype.onEntering = function onEntering() {};\n\t\n\t    EnBtn_read.prototype.onEntered = function onEntered() {};\n\t\n\t    EnBtn_read.prototype.onExiting = function onExiting() {};\n\t\n\t    EnBtn_read.prototype.onExited = function onExited() {};\n\t\n\t    EnBtn_read.prototype.toggleRead = function toggleRead() {\n\t        var _this2 = this;\n\t\n\t        if (this.state.lecteur && this.state.loaded) {\n\t            if (!this.state.readStatus) {\n\t                this.setState({ readStatus: true });\n\t                this.setState({ readText: \"Unmark read\" });\n\t                this.setState({ btn_class_read: \"danger\" });\n\t            } else {\n\t                this.setState({ readStatus: false });\n\t                this.setState({ readText: \"Mark read\" });\n\t                this.setState({ btn_class_read: \"success\" });\n\t\n\t                this.state.itemsLu.map(function (item) {\n\t                    if (item.user == _this2.state.lecteur.email && item.chapitre == _this2.props.contentChapitre.titreChapitre) {\n\t                        _this2.removeItem(item.id);\n\t                    };\n\t                });\n\t            }\n\t        }\n\t    };\n\t\n\t    EnBtn_read.prototype.componentWillMount = function componentWillMount() {\n\t        this.state.lecteur = _reactCookies2.default.load('lecteur');\n\t    };\n\t\n\t    EnBtn_read.prototype.componentDidMount = function componentDidMount() {\n\t        var _this3 = this;\n\t\n\t        var itemsRefLu = _firebase2.default.database().ref('reads');\n\t        itemsRefLu.on('value', function (snapshot) {\n\t            var itemsLu = snapshot.val();\n\t            var newState = [];\n\t            for (var item in itemsLu) {\n\t                newState.push({\n\t                    id: item,\n\t                    chapitre: itemsLu[item].chapitre,\n\t                    chapitreSlug: itemsLu[item].slug,\n\t                    user: itemsLu[item].user,\n\t                    nomRoman: itemsLu[item].nomRoman\n\t                });\n\t            }\n\t            _this3.setState({\n\t                itemsLu: newState\n\t            });\n\t\n\t            if (!_this3.state.loaded) {\n\t                _this3.checkUpReads();\n\t                _this3.setState({ loaded: true });\n\t            }\n\t        });\n\t    };\n\t\n\t    EnBtn_read.prototype.checkUpReads = function checkUpReads() {\n\t        var _this4 = this;\n\t\n\t        if (this.state.lecteur) {\n\t            this.state.itemsLu.map(function (item) {\n\t                if (item.chapitre == _this4.props.contentChapitre.titreChapitre && item.user == _this4.state.lecteur.email) {\n\t                    _this4.setState({ readStatus: true });\n\t                    _this4.setState({ readText: \"Unmark read\" });\n\t                    _this4.setState({ btn_class_read: \"danger\" });\n\t                };\n\t            });\n\t        }\n\t    };\n\t\n\t    EnBtn_read.prototype.handleSubmitRead = function handleSubmitRead(e) {\n\t        var _this5 = this;\n\t\n\t        // Empêche le refresh\n\t        e.preventDefault();\n\t\n\t        // Met la référence vers la database\n\t        var itemsRef = _firebase2.default.database().ref('reads');\n\t\n\t        if (!this.state.readStatus && this.state.loaded) {\n\t            this.state.items.map(function (itemLu) {\n\t                if (itemLu.chapitre == _this5.props.contentChapitre.titreChapitre && itemLu.user == _this5.state.lecteur.email) {\n\t                    _this5.setState({ likeAutorise: false });\n\t                };\n\t            });\n\t\n\t            if (this.state.likeAutorise) {\n\t                // Popule les champs dans une collection \"item\"\n\t                var itemLu = {\n\t                    user: this.state.lecteur.email,\n\t                    chapitre: this.props.contentChapitre.titreChapitre,\n\t                    chapitreSlug: this.props.contentChapitre.slug,\n\t                    nomRoman: this.props.contentChapitre.nomRoman,\n\t                    chapitreApres: this.props.contentChapitre.chapitreApres,\n\t                    codeChapitre: this.props.contentChapitre.codeChapitre\n\t\n\t                    // Pousse l'item créé dans la collection\n\t                };itemsRef.push(itemLu);\n\t            }\n\t        }\n\t\n\t        this.toggleRead();\n\t    };\n\t\n\t    EnBtn_read.prototype.login = function login() {\n\t        var _this6 = this;\n\t\n\t        _firebase.auth.signInWithPopup(_firebase.provider).then(function (result) {\n\t            var user = result.user;\n\t            _this6.setState({\n\t                user: user\n\t            });\n\t            _reactCookies2.default.save('lecteur', _this6.state.user, { path: '/' });\n\t\n\t            window.location.reload();\n\t        });\n\t    };\n\t\n\t    EnBtn_read.prototype.removeItem = function removeItem(itemId) {\n\t        if (this.state.readText == \"Unmark read\") {\n\t            var itemRef = _firebase2.default.database().ref('/reads/' + itemId);\n\t            itemRef.remove();\n\t        }\n\t    };\n\t\n\t    EnBtn_read.prototype.render = function render() {\n\t        return _react2.default.createElement(\n\t            'form',\n\t            { onSubmit: this.handleSubmitRead, className: 'float-left d-content' },\n\t            _react2.default.createElement(\n\t                _reactstrap.Button,\n\t                { color: this.state.btn_class_read },\n\t                this.state.readText\n\t            ),\n\t            _react2.default.createElement(_reactstrap.Collapse, {\n\t                isOpen: this.state.readStatus,\n\t                onEntering: this.onEntering,\n\t                onEntered: this.onEntered,\n\t                onExiting: this.onExiting,\n\t                onExited: this.onExited,\n\t\n\t                className: 'float-left'\n\t            })\n\t        );\n\t    };\n\t\n\t    return EnBtn_read;\n\t}(_react2.default.Component);\n\t\n\texports.default = EnBtn_read;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ 206:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\texports.pageQuery = undefined;\n\t\n\tvar _react = __webpack_require__(2);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(5);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _gatsbyLink = __webpack_require__(3);\n\t\n\tvar _gatsbyLink2 = _interopRequireDefault(_gatsbyLink);\n\t\n\t__webpack_require__(6);\n\t\n\tvar _reactstrap = __webpack_require__(4);\n\t\n\tvar _enHeader = __webpack_require__(12);\n\t\n\tvar _enHeader2 = _interopRequireDefault(_enHeader);\n\t\n\tvar _enFooter = __webpack_require__(11);\n\t\n\tvar _enFooter2 = _interopRequireDefault(_enFooter);\n\t\n\tvar _firebase = __webpack_require__(7);\n\t\n\tvar _reactCookies = __webpack_require__(8);\n\t\n\tvar _reactCookies2 = _interopRequireDefault(_reactCookies);\n\t\n\tvar _enBtn_like = __webpack_require__(69);\n\t\n\tvar _enBtn_like2 = _interopRequireDefault(_enBtn_like);\n\t\n\tvar _enBtn_read = __webpack_require__(71);\n\t\n\tvar _enBtn_read2 = _interopRequireDefault(_enBtn_read);\n\t\n\tvar _enBtn_like_disconnect = __webpack_require__(70);\n\t\n\tvar _enBtn_like_disconnect2 = _interopRequireDefault(_enBtn_like_disconnect);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Story = function (_Component) {\n\t    _inherits(Story, _Component);\n\t\n\t    function Story(props) {\n\t        _classCallCheck(this, Story);\n\t\n\t        var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\t\n\t        _this.login = _this.login.bind(_this);\n\t\n\t        _this.state = {\n\t            user: null,\n\t            lecteur: null\n\t        };\n\t        return _this;\n\t    }\n\t\n\t    Story.prototype.componentWillMount = function componentWillMount() {\n\t        this.state.lecteur = _reactCookies2.default.load('lecteur');\n\t    };\n\t\n\t    Story.prototype.login = function login() {\n\t        var _this2 = this;\n\t\n\t        _firebase.auth.signInWithPopup(_firebase.provider).then(function (result) {\n\t            var user = result.user;\n\t            _this2.setState({\n\t                user: user\n\t            });\n\t            _reactCookies2.default.save('lecteur', _this2.state.user, { path: '/' });\n\t\n\t            window.location.reload();\n\t        });\n\t    };\n\t\n\t    Story.prototype.render = function render() {\n\t        var _this3 = this;\n\t\n\t        var data = this.props.data;\n\t\n\t\n\t        return _react2.default.createElement(\n\t            'div',\n\t            { id: 'page-wrapper' },\n\t            _react2.default.createElement(_enHeader2.default, null),\n\t            _react2.default.createElement(\n\t                'div',\n\t                null,\n\t                _react2.default.createElement(\n\t                    _reactstrap.Breadcrumb,\n\t                    { className: 'mb-0' },\n\t                    _react2.default.createElement(\n\t                        _reactstrap.BreadcrumbItem,\n\t                        null,\n\t                        _react2.default.createElement(\n\t                            _gatsbyLink2.default,\n\t                            { to: '/en' },\n\t                            'Homepage'\n\t                        )\n\t                    ),\n\t                    _react2.default.createElement(\n\t                        _reactstrap.BreadcrumbItem,\n\t                        null,\n\t                        _react2.default.createElement(\n\t                            _gatsbyLink2.default,\n\t                            { to: '/en/stories' },\n\t                            'Our Univese stories...'\n\t                        )\n\t                    ),\n\t                    _react2.default.createElement(\n\t                        _reactstrap.BreadcrumbItem,\n\t                        { active: true },\n\t                        data.contentfulRoman.titreRoman\n\t                    )\n\t                )\n\t            ),\n\t            _react2.default.createElement(\n\t                'div',\n\t                { className: 'equiv' },\n\t                _react2.default.createElement(\n\t                    _gatsbyLink2.default,\n\t                    { className: 'text-white', to: data.contentfulRoman.equivalentUrl },\n\t                    _react2.default.createElement(\n\t                        _reactstrap.Button,\n\t                        { className: 'float-right', color: 'primary' },\n\t                        'Fr'\n\t                    )\n\t                )\n\t            ),\n\t            _react2.default.createElement(\n\t                'div',\n\t                { className: 'my-5' },\n\t                _react2.default.createElement(\n\t                    _reactstrap.Container,\n\t                    null,\n\t                    _react2.default.createElement(\n\t                        _reactstrap.Row,\n\t                        null,\n\t                        _react2.default.createElement(\n\t                            _reactstrap.Col,\n\t                            { lg: '12' },\n\t                            _react2.default.createElement(\n\t                                'h1',\n\t                                { className: 'display-4 mb-5' },\n\t                                data.contentfulRoman.titreRoman\n\t                            )\n\t                        )\n\t                    ),\n\t                    data.contentfulRoman.imageCouverture ? _react2.default.createElement(\n\t                        _reactstrap.Row,\n\t                        null,\n\t                        _react2.default.createElement(\n\t                            _reactstrap.Col,\n\t                            { lg: '4' },\n\t                            _react2.default.createElement('img', { className: 'img-fluid mb-5', src: data.contentfulRoman.imageCouverture.file.url })\n\t                        ),\n\t                        _react2.default.createElement(\n\t                            _reactstrap.Col,\n\t                            { lg: '8' },\n\t                            _react2.default.createElement('div', { className: 'lead', dangerouslySetInnerHTML: { __html: data.contentfulRoman.resume.childMarkdownRemark.html } }),\n\t                            _react2.default.createElement(\n\t                                _reactstrap.Progress,\n\t                                { animated: true, value: data.contentfulRoman.chapitreActuel / data.contentfulRoman.maximumChapitre * 100 },\n\t                                data.contentfulRoman.chapitreActuel + \"/\" + data.contentfulRoman.maximumChapitre\n\t                            ),\n\t                            _react2.default.createElement(\n\t                                _reactstrap.ListGroup,\n\t                                { className: 'pt-5' },\n\t                                data.allContentfulChapitre.edges.map(function (edge) {\n\t                                    return _react2.default.createElement(\n\t                                        _reactstrap.ListGroupItem,\n\t                                        { className: 'border-0 pl-0 pt-0', key: edge.node.id },\n\t                                        _react2.default.createElement(\n\t                                            _gatsbyLink2.default,\n\t                                            { to: '/en/stories/chapter/' + edge.node.slug },\n\t                                            edge.node.titreChapitre\n\t                                        ),\n\t                                        _this3.state.lecteur != \"null\" ? _react2.default.createElement(\n\t                                            _react2.default.Fragment,\n\t                                            null,\n\t                                            _react2.default.createElement(\n\t                                                'span',\n\t                                                null,\n\t                                                '\\xA0',\n\t                                                _react2.default.createElement(_enBtn_read2.default, { contentChapitre: edge.node })\n\t                                            ),\n\t                                            _react2.default.createElement(\n\t                                                'span',\n\t                                                null,\n\t                                                '\\xA0',\n\t                                                _react2.default.createElement(_enBtn_like2.default, { contentChapitre: edge.node })\n\t                                            )\n\t                                        ) : _react2.default.createElement('span', null)\n\t                                    );\n\t                                })\n\t                            )\n\t                        )\n\t                    ) : _react2.default.createElement(\n\t                        _reactstrap.Row,\n\t                        null,\n\t                        _react2.default.createElement(\n\t                            _reactstrap.Col,\n\t                            { lg: '12' },\n\t                            _react2.default.createElement('div', { className: 'lead', dangerouslySetInnerHTML: { __html: data.contentfulRoman.resume.childMarkdownRemark.html } }),\n\t                            _react2.default.createElement(\n\t                                _reactstrap.Progress,\n\t                                { animated: true, value: data.contentfulRoman.chapitreActuel / data.contentfulRoman.maximumChapitre * 100 },\n\t                                data.contentfulRoman.chapitreActuel + \"/\" + data.contentfulRoman.maximumChapitre\n\t                            ),\n\t                            _react2.default.createElement(\n\t                                _reactstrap.ListGroup,\n\t                                { className: 'pt-5' },\n\t                                data.allContentfulChapitre.edges.map(function (edge) {\n\t                                    return _react2.default.createElement(\n\t                                        _reactstrap.ListGroupItem,\n\t                                        { className: 'border-0 pl-0 pt-0', key: edge.node.id },\n\t                                        _react2.default.createElement(\n\t                                            _gatsbyLink2.default,\n\t                                            { to: '/en/stories/chapter/' + edge.node.slug },\n\t                                            edge.node.titreChapitre\n\t                                        ),\n\t                                        _this3.state.lecteur != \"null\" ? _react2.default.createElement(\n\t                                            _react2.default.Fragment,\n\t                                            null,\n\t                                            _react2.default.createElement(\n\t                                                'span',\n\t                                                null,\n\t                                                '\\xA0',\n\t                                                _react2.default.createElement(_enBtn_read2.default, { contentChapitre: edge.node })\n\t                                            ),\n\t                                            _react2.default.createElement(\n\t                                                'span',\n\t                                                null,\n\t                                                '\\xA0',\n\t                                                _react2.default.createElement(_enBtn_like2.default, { contentChapitre: edge.node })\n\t                                            )\n\t                                        ) : _react2.default.createElement('span', null)\n\t                                    );\n\t                                })\n\t                            )\n\t                        )\n\t                    ),\n\t                    _react2.default.createElement('br', null)\n\t                )\n\t            ),\n\t            _react2.default.createElement(_enFooter2.default, null)\n\t        );\n\t    };\n\t\n\t    return Story;\n\t}(_react.Component);\n\t\n\tStory.propTypes = {\n\t    data: _propTypes2.default.object.isRequired\n\t};\n\t\n\texports.default = Story;\n\tvar pageQuery = exports.pageQuery = '** extracted graphql fragment **';\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// component---src-templates-story-en-js-a2b468b8692040ac72cb.js","import React, { Component } from 'react'\r\nimport Link from 'gatsby-link'\r\nimport {\r\n    Button,\r\n    Collapse\r\n} from 'reactstrap';\r\nimport firebase, { auth, provider } from '../firebase.js';\r\nimport cookie from 'react-cookies';\r\n\r\nexport default class EnBtn_like extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.onEntering = this.onEntering.bind(this);\r\n        this.onEntered = this.onEntered.bind(this);\r\n        this.onExiting = this.onExiting.bind(this);\r\n        this.onExited = this.onExited.bind(this);\r\n        this.checkUpLikes = this.checkUpLikes.bind(this);\r\n\r\n        this.toggleLike = this.toggleLike.bind(this);\r\n\r\n        this.login = this.login.bind(this);\r\n\r\n        this.state = {\r\n            user: null,\r\n            lecteur: null,\r\n            nomRoman: \"\",\r\n            items: [],\r\n            nombreLike: 0,\r\n            likeStatus: false,\r\n            likeText: \"Like\",\r\n            btn_class_like: \"success\",\r\n\t\t\tlikeAutorise: true,\r\n            loaded: false\r\n        };\r\n        this.handleSubmitLike = this.handleSubmitLike.bind(this);\r\n    }\r\n\r\n    onEntering() { }\r\n\r\n    onEntered() { }\r\n\r\n    onExiting() { }\r\n\r\n    onExited() { }\r\n\r\n    toggleLike() {\r\n        if ((this.state.lecteur) && (this.state.loaded)) {\r\n            if (!this.state.likeStatus) {\r\n                this.setState({ likeStatus: true });\r\n                this.setState({ likeText: \"Unlike\" });\r\n                this.setState({ nombreLike: this.state.nombreLike + 1 });\r\n                this.setState({ btn_class_like: \"danger\" });\r\n            } else {\r\n                this.setState({ likeStatus: false });\r\n                this.setState({ likeText: \"Like\" });\r\n                this.setState({ nombreLike: this.state.nombreLike - 1 });\r\n                this.setState({ btn_class_like: \"success\" });\r\n\r\n                this.state.items.map((item) => {\r\n                    if ((item.user == this.state.lecteur.email) && (item.chapitre == this.props.contentChapitre.titreChapitre)) {\r\n                        this.removeItem(item.id);\r\n                    };\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.state.lecteur = cookie.load('lecteur');\r\n    }\r\n\r\n    componentDidMount() {\r\n        const itemsRef = firebase.database().ref('likes');\r\n        itemsRef.on('value', (snapshot) => {\r\n            let items = snapshot.val();\r\n            let newState = [];\r\n            for (let item in items) {\r\n                newState.push({\r\n                    id: item,\r\n                    chapitre: items[item].chapitre,\r\n                    user: items[item].user\r\n                });\r\n            }\r\n            this.setState({\r\n                items: newState\r\n            });\r\n\r\n            if (!this.state.loaded) {\r\n                this.checkUpLikes();\r\n                this.setState({ loaded: true });\r\n            }\r\n        });\r\n    }\r\n\r\n    checkUpLikes() {\r\n        this.setState({ nombreLike: 0 });\r\n        if (this.state.lecteur) {\r\n            this.state.items.map((item) => {\r\n                if (item.chapitre == this.props.contentChapitre.titreChapitre) {\r\n                    if (item.user == this.state.lecteur.email) {\r\n                        this.setState({ likeStatus: true });\r\n                        this.setState({ likeText: \"Unlike\" });\r\n                        this.setState({ btn_class_like: \"danger\" });\r\n                    };\r\n\r\n                    this.setState({ nombreLike: this.state.nombreLike + 1 });\r\n                };\r\n            })\r\n        }\r\n    }\r\n\r\n    handleSubmitLike(e) {\r\n        // Empêche le refresh\r\n        e.preventDefault();\r\n\r\n        // Met la référence vers la database\r\n        const itemsRef = firebase.database().ref('likes');\r\n\r\n        if ((!this.state.likeStatus) && (this.state.loaded)) {\r\n            this.state.items.map((item) => {\r\n                if ((item.chapitre == this.props.contentChapitre.titreChapitre) && (item.user == this.state.lecteur.email)) {\r\n                    this.setState({ likeAutorise: false });\r\n                };\r\n            })\r\n\r\n            if (this.state.likeAutorise) {\r\n                // Popule les champs dans une collection \"item\"\r\n                const item = {\r\n                    user: this.state.lecteur.email,\r\n                    chapitre: this.props.contentChapitre.titreChapitre,\r\n                    nomRoman: this.props.contentChapitre.nomRoman\r\n                }\r\n\r\n                // Pousse l'item créé dans la collection\r\n                itemsRef.push(item);\r\n            }\r\n        }\r\n\r\n        this.toggleLike();\r\n    }\r\n\r\n    login() {\r\n        auth.signInWithPopup(provider)\r\n            .then((result) => {\r\n                const user = result.user;\r\n                this.setState({\r\n                    user\r\n                });\r\n                cookie.save('lecteur', this.state.user, { path: '/' });\r\n\r\n                window.location.reload();\r\n            });\r\n    }\r\n\r\n    removeItem(itemId) {\r\n        if (this.state.likeText == \"Unlike\") {\r\n            const itemRef = firebase.database().ref(`/likes/${itemId}`);\r\n            itemRef.remove();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form onSubmit={this.handleSubmitLike} className=\"float-left d-content\">\r\n                <Button color={this.state.btn_class_like}>{this.state.nombreLike + \" | \" + this.state.likeText}</Button>\r\n\r\n                <Collapse\r\n                    isOpen={this.state.likeStatus}\r\n                    onEntering={this.onEntering}\r\n                    onEntered={this.onEntered}\r\n                    onExiting={this.onExiting}\r\n                    onExited={this.onExited}\r\n\r\n                    className=\"float-left\"\r\n                >\r\n                </Collapse>\r\n            </form>\r\n        );\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/enBtn_like.js","import React, { Component } from 'react'\r\nimport Link from 'gatsby-link'\r\nimport {\r\n    Button,\r\n    Collapse\r\n} from 'reactstrap';\r\nimport firebase, { auth, provider } from '../firebase.js';\r\nimport cookie from 'react-cookies';\r\n\r\nexport default class EnBtn_like_disconnect extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.checkUpLikes = this.checkUpLikes.bind(this);\r\n        this.login = this.login.bind(this);\r\n\r\n        this.state = {\r\n            user: null,\r\n            lecteur: null,\r\n            nomRoman: \"\",\r\n            items: [],\r\n            nombreLike: 0,\r\n            btn_class_like: \"success\",\r\n\t\t\tlikeAutorise: false,\r\n            loaded: false\r\n        };\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.state.lecteur = cookie.load('lecteur');\r\n    }\r\n\r\n    componentDidMount() {\r\n        const itemsRef = firebase.database().ref('likes');\r\n        itemsRef.on('value', (snapshot) => {\r\n            let items = snapshot.val();\r\n            let newState = [];\r\n            for (let item in items) {\r\n                newState.push({\r\n                    id: item,\r\n                    chapitre: items[item].chapitre,\r\n                    user: items[item].user\r\n                });\r\n            }\r\n            this.setState({\r\n                items: newState\r\n            });\r\n\r\n            if (!this.state.loaded) {\r\n                this.checkUpLikes();\r\n                this.setState({ loaded: true });\r\n            }\r\n        });\r\n    }\r\n\r\n    checkUpLikes() {\r\n        this.setState({ nombreLike: 0 });\r\n        if (this.state.lecteur) {\r\n            this.state.items.map((item) => {\r\n                if (item.chapitre == this.props.contentChapitre.titreChapitre) {\r\n                    if (item.user == this.state.lecteur.email) {\r\n                        this.setState({ likeStatus: true });\r\n                        this.setState({ likeText: \"Je n'aime plus\" });\r\n                        this.setState({ btn_class_like: \"danger\" });\r\n                    };\r\n\r\n                    this.setState({ nombreLike: this.state.nombreLike + 1 });\r\n                };\r\n            })\r\n        }\r\n    }\r\n\r\n    login() {\r\n        auth.signInWithPopup(provider)\r\n            .then((result) => {\r\n                const user = result.user;\r\n                this.setState({\r\n                    user\r\n                });\r\n                cookie.save('lecteur', this.state.user, { path: '/' });\r\n\r\n                window.location.reload();\r\n            });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Button color={this.state.btn_class_like} onClick={this.login}>{this.state.nombreLike + \" | Login to give a like\"}</Button>\r\n        );\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/enBtn_like_disconnect.js","import React, { Component } from 'react'\r\nimport Link from 'gatsby-link'\r\nimport {\r\n    Button,\r\n    Collapse\r\n} from 'reactstrap';\r\nimport firebase, { auth, provider } from '../firebase.js';\r\nimport cookie from 'react-cookies';\r\n\r\nexport default class EnBtn_read extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.onEntering = this.onEntering.bind(this);\r\n        this.onEntered = this.onEntered.bind(this);\r\n        this.onExiting = this.onExiting.bind(this);\r\n        this.onExited = this.onExited.bind(this);\r\n        this.checkUpReads = this.checkUpReads.bind(this);\r\n\r\n        this.toggleRead = this.toggleRead.bind(this);\r\n\r\n        this.login = this.login.bind(this);\r\n\r\n        this.state = {\r\n            user: null,\r\n            lecteur: null,\r\n            nomRoman: \"\",\r\n            items: [],\r\n            itemsLu: [],\r\n            readStatus: false,\r\n            readText: \"Mark read\",\r\n            btn_class_read: \"success\",\r\n\t\t\tlikeAutorise: true,\r\n            loaded: false\r\n        };\r\n        this.handleSubmitRead = this.handleSubmitRead.bind(this);\r\n    }\r\n\r\n    onEntering() { }\r\n\r\n    onEntered() { }\r\n\r\n    onExiting() { }\r\n\r\n    onExited() { }\r\n\r\n    toggleRead() {\r\n        if ((this.state.lecteur) && (this.state.loaded)) {\r\n            if (!this.state.readStatus) {\r\n                this.setState({ readStatus: true });\r\n                this.setState({ readText: \"Unmark read\" });\r\n                this.setState({ btn_class_read: \"danger\" });\r\n            } else {\r\n                this.setState({ readStatus: false });\r\n                this.setState({ readText: \"Mark read\" });\r\n                this.setState({ btn_class_read: \"success\" });\r\n\r\n                this.state.itemsLu.map((item) => {\r\n                    if ((item.user == this.state.lecteur.email) && (item.chapitre == this.props.contentChapitre.titreChapitre)) {\r\n                        this.removeItem(item.id);\r\n                    };\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.state.lecteur = cookie.load('lecteur');\r\n    }\r\n\r\n    componentDidMount() {\r\n        const itemsRefLu = firebase.database().ref('reads');\r\n        itemsRefLu.on('value', (snapshot) => {\r\n            let itemsLu = snapshot.val();\r\n            let newState = [];\r\n            for (let item in itemsLu) {\r\n                newState.push({\r\n                    id: item,\r\n                    chapitre: itemsLu[item].chapitre,\r\n                    chapitreSlug: itemsLu[item].slug,\r\n                    user: itemsLu[item].user,\r\n                    nomRoman: itemsLu[item].nomRoman\r\n                });\r\n            }\r\n            this.setState({\r\n                itemsLu: newState\r\n            });\r\n\r\n            if (!this.state.loaded) {\r\n                this.checkUpReads();\r\n                this.setState({ loaded: true });\r\n            }\r\n        });\r\n    }\r\n\r\n    checkUpReads() {\r\n        if (this.state.lecteur) {\r\n            this.state.itemsLu.map((item) => {\r\n                if ((item.chapitre == this.props.contentChapitre.titreChapitre) && (item.user == this.state.lecteur.email)) {\r\n                    this.setState({ readStatus: true });\r\n                    this.setState({ readText: \"Unmark read\" });\r\n                    this.setState({ btn_class_read: \"danger\" });\r\n                };\r\n            })\r\n        }\r\n    }\r\n\r\n    handleSubmitRead(e) {\r\n        // Empêche le refresh\r\n        e.preventDefault();\r\n\r\n        // Met la référence vers la database\r\n        const itemsRef = firebase.database().ref('reads');\r\n\r\n        if ((!this.state.readStatus) && (this.state.loaded)) {\r\n            this.state.items.map((itemLu) => {\r\n                if ((itemLu.chapitre == this.props.contentChapitre.titreChapitre) && (itemLu.user == this.state.lecteur.email)) {\r\n                    this.setState({ likeAutorise: false });\r\n                };\r\n            })\r\n\r\n            if (this.state.likeAutorise) {\r\n                // Popule les champs dans une collection \"item\"\r\n                const itemLu = {\r\n                    user: this.state.lecteur.email,\r\n                    chapitre: this.props.contentChapitre.titreChapitre,\r\n                    chapitreSlug: this.props.contentChapitre.slug,\r\n                    nomRoman: this.props.contentChapitre.nomRoman,\r\n                    chapitreApres: this.props.contentChapitre.chapitreApres,\r\n                    codeChapitre: this.props.contentChapitre.codeChapitre\r\n                }\r\n\r\n                // Pousse l'item créé dans la collection\r\n                itemsRef.push(itemLu);\r\n            }\r\n        }\r\n\r\n        this.toggleRead();\r\n    }\r\n\r\n    login() {\r\n        auth.signInWithPopup(provider)\r\n            .then((result) => {\r\n                const user = result.user;\r\n                this.setState({\r\n                    user\r\n                });\r\n                cookie.save('lecteur', this.state.user, { path: '/' });\r\n\r\n                window.location.reload();\r\n            });\r\n    }\r\n\r\n    removeItem(itemId) {\r\n        if (this.state.readText == \"Unmark read\") {\r\n            const itemRef = firebase.database().ref(`/reads/${itemId}`);\r\n            itemRef.remove();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form onSubmit={this.handleSubmitRead} className=\"float-left d-content\">\r\n                <Button color={this.state.btn_class_read}>{this.state.readText}</Button>\r\n\r\n                <Collapse\r\n                    isOpen={this.state.readStatus}\r\n                    onEntering={this.onEntering}\r\n                    onEntered={this.onEntered}\r\n                    onExiting={this.onExiting}\r\n                    onExited={this.onExited}\r\n\r\n                    className=\"float-left\"\r\n                >\r\n                </Collapse>\r\n            </form>\r\n        );\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/enBtn_read.js","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Link from 'gatsby-link'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {\r\n    Col,\r\n    Row,\r\n    Container,\r\n    ListGroup,\r\n    ListGroupItem,\r\n    Breadcrumb,\r\n    BreadcrumbItem,\r\n    Progress,\r\n    Button\r\n} from 'reactstrap';\r\nimport HeaderEn from '../components/enHeader'\r\nimport FooterEn from '../components/enFooter'\r\nimport { auth, provider } from '../firebase.js';\r\nimport cookie from 'react-cookies';\r\nimport EnBtn_like from '../components/enBtn_like'\r\nimport EnBtn_read from '../components/enBtn_read'\r\nimport EnBtn_like_disconnect from '../components/enBtn_like_disconnect'\r\n\r\nclass Story extends Component {\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.login = this.login.bind(this);\r\n\r\n\t\tthis.state = {\r\n\t\t\tuser: null,\r\n\t\t\tlecteur: null\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillMount() {\r\n\t\tthis.state.lecteur = cookie.load('lecteur');\r\n\t}\r\n\r\n\tlogin() {\r\n\t\tauth.signInWithPopup(provider)\r\n\t\t\t.then((result) => {\r\n\t\t\t\tconst user = result.user;\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tuser\r\n\t\t\t\t});\r\n\t\t\t\tcookie.save('lecteur', this.state.user, { path: '/' });\r\n\r\n\t\t\t\twindow.location.reload();\r\n\t\t\t});\r\n\t}\r\n\r\n\trender() {\r\n        const {\r\n            data\r\n        } = this.props;\r\n\r\n        return (\r\n            <div id=\"page-wrapper\">\r\n                <HeaderEn />\r\n\r\n                <div>\r\n                    <Breadcrumb className=\"mb-0\">\r\n                        <BreadcrumbItem><Link to=\"/en\">Homepage</Link></BreadcrumbItem>\r\n                        <BreadcrumbItem><Link to=\"/en/stories\">Our Univese stories...</Link></BreadcrumbItem>\r\n                        <BreadcrumbItem active>{data.contentfulRoman.titreRoman}</BreadcrumbItem>\r\n                    </Breadcrumb>\r\n                </div>\r\n\r\n                <div className=\"equiv\">\r\n                    <Link className=\"text-white\" to={data.contentfulRoman.equivalentUrl}><Button className=\"float-right\" color=\"primary\">Fr</Button></Link>\r\n                </div>\r\n\r\n                <div className=\"my-5\">\r\n                    <Container>\r\n                        <Row>\r\n                            <Col lg=\"12\">\r\n                                <h1 className=\"display-4 mb-5\">{data.contentfulRoman.titreRoman}</h1>\r\n                            </Col>\r\n                        </Row>\r\n\r\n                        {data.contentfulRoman.imageCouverture ?\r\n                            (\r\n                                <Row>\r\n                                    <Col lg=\"4\">\r\n                                        <img className=\"img-fluid mb-5\" src={data.contentfulRoman.imageCouverture.file.url} />\r\n                                    </Col>\r\n\r\n                                    <Col lg=\"8\">\r\n                                        <div className=\"lead\" dangerouslySetInnerHTML={{ __html: data.contentfulRoman.resume.childMarkdownRemark.html }} />\r\n\r\n                                        <Progress animated value={(data.contentfulRoman.chapitreActuel / data.contentfulRoman.maximumChapitre) * 100}>{data.contentfulRoman.chapitreActuel + \"/\" + data.contentfulRoman.maximumChapitre}</Progress>\r\n\r\n                                        <ListGroup className=\"pt-5\">\r\n                                            {\r\n                                                data.allContentfulChapitre.edges.map(\r\n                                                    (edge) => <ListGroupItem className=\"border-0 pl-0 pt-0\" key={edge.node.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link to={'/en/stories/chapter/' + edge.node.slug}>{edge.node.titreChapitre}</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.lecteur != \"null\" ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;<EnBtn_read contentChapitre={edge.node} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;<EnBtn_like contentChapitre={edge.node} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>) :\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* &nbsp;<EnBtn_like_disconnect contentChapitre={edge.node} /> */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>)\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ListGroupItem>)\r\n                                            }\r\n                                        </ListGroup>\r\n                                    </Col>\r\n                                </Row>\r\n                            ) :\r\n                            (\r\n                                <Row>\r\n                                    <Col lg=\"12\">\r\n                                        <div className=\"lead\" dangerouslySetInnerHTML={{ __html: data.contentfulRoman.resume.childMarkdownRemark.html }} />\r\n\r\n                                        <Progress animated value={(data.contentfulRoman.chapitreActuel / data.contentfulRoman.maximumChapitre) * 100}>{data.contentfulRoman.chapitreActuel + \"/\" + data.contentfulRoman.maximumChapitre}</Progress>\r\n\r\n                                        <ListGroup className=\"pt-5\">\r\n                                            {\r\n                                                data.allContentfulChapitre.edges.map(\r\n                                                    (edge) => <ListGroupItem className=\"border-0 pl-0 pt-0\" key={edge.node.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link to={'/en/stories/chapter/' + edge.node.slug}>{edge.node.titreChapitre}</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.lecteur != \"null\" ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;<EnBtn_read contentChapitre={edge.node} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;<EnBtn_like contentChapitre={edge.node} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>) :\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* &nbsp;<EnBtn_like_disconnect contentChapitre={edge.node} /> */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>)\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ListGroupItem>)\r\n                                            }\r\n                                        </ListGroup>\r\n                                    </Col>\r\n                                </Row>\r\n                            )\r\n                        }\r\n                        <br />\r\n                    </Container>\r\n                </div>\r\n\r\n                <FooterEn />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nStory.propTypes = {\r\n    data: PropTypes.object.isRequired\r\n}\r\n\r\nexport default Story\r\n\r\nexport const pageQuery = graphql\r\n    `query romanQueryEN ($slug: String!) {\r\n  contentfulRoman(slug: {eq: $slug}, node_locale: {eq: \"en-US\"}) {\r\n    titreRoman\r\n    resume {\r\n      childMarkdownRemark {\r\n        html\r\n      }\r\n    }\r\n    imageCouverture {\r\n      file {\r\n        url\r\n      }\r\n    }\r\n    typeHistoire\r\n    chapitreActuel\r\n    maximumChapitre\r\n    slug\r\n    equivalentUrl\r\n}\r\n  allContentfulChapitre(sort: {fields: [ordre], order: ASC}, filter: {node_locale: {eq: \"en-US\"}, nomRoman: {eq: $slug}}) {\r\n    edges {\r\n      node {\r\n        id\r\n        titreChapitre\r\n\t\tnomRoman\r\n\t\tchapitreApres\r\n\t\tcodeChapitre\r\n        slug\r\n      }\r\n    }\r\n  }\r\n}`\n\n\n// WEBPACK FOOTER //\n// ./src/templates/story.en.js"],"sourceRoot":""}